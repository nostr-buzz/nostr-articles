import{b,u as v,j as s}from"./index-C1T0n0NP.js";import{D as y,S as B}from"./DocumentEditor-BmX01oTk.js";import{H as t,L as w,B as c}from"./Header-C-c1rW_a.js";import{u as C,C as x,c as u,j as h,d as j,F as D}from"./formatTime-Cjkn2NsU.js";import{b as T,S as i}from"./useDocuments-DchKesL6.js";import{A as o}from"./ActionBar-BfeRKc21.js";import{C as p}from"./circle-alert-C1Ek57rN.js";import"./switch-C4PZvqPR.js";function $(){const{identifier:l}=b(),e=v(),{user:a}=C(),{data:r,isLoading:N,error:g}=T(l||"",a==null?void 0:a.pubkey),n=()=>{e(r?`/document/${l}`:"/")};return a?N?s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx(t,{}),s.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[s.jsx(o,{showBackButton:!0,onBack:n,backButtonText:"Back"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[s.jsx(i,{className:"h-10 w-full"}),s.jsx(i,{className:"h-96 w-full"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(i,{className:"h-32 w-full"}),s.jsx(i,{className:"h-48 w-full"})]})]})]})]}):g||!r?s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx(t,{}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx(o,{showBackButton:!0,onBack:n,backButtonText:"Back"}),s.jsxs(x,{className:"max-w-md mx-auto",children:[s.jsx(u,{children:s.jsxs(h,{className:"flex items-center gap-2",children:[s.jsx(p,{className:"h-5 w-5 text-destructive"}),"Document Not Found"]})}),s.jsxs(j,{children:[s.jsx("p",{className:"text-muted-foreground mb-4",children:"The document you're trying to edit could not be found or you don't have permission to edit it."}),s.jsx(c,{onClick:()=>e("/"),className:"w-full",children:"Go to Dashboard"})]})]})]})]}):r.pubkey!==a.pubkey?s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx(t,{}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx(o,{showBackButton:!0,onBack:n,backButtonText:"Back"}),s.jsxs(x,{className:"max-w-md mx-auto",children:[s.jsx(u,{children:s.jsxs(h,{className:"flex items-center gap-2",children:[s.jsx(p,{className:"h-5 w-5 text-destructive"}),"Access Denied"]})}),s.jsxs(j,{children:[s.jsx("p",{className:"text-muted-foreground mb-4",children:"You don't have permission to edit this document. Only the author can edit their documents."}),s.jsx(c,{onClick:()=>e(`/document/${l}`),className:"w-full",children:"View Document"})]})]})]})]}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-8",children:[s.jsx(t,{}),s.jsx(y,{document:r,renderActions:({handleSaveDraft:k,handlePublish:f,isPublishing:m,document:d})=>s.jsx("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:s.jsxs(o,{showBackButton:!0,onBack:n,backButtonText:"Back to Document",children:[s.jsxs(c,{variant:"outline",onClick:k,disabled:m,children:[s.jsx(B,{className:"h-4 w-4 mr-2"}),"Save Draft"]}),s.jsxs(c,{onClick:f,disabled:m,children:[s.jsx(D,{className:"h-4 w-4 mr-2"}),(d==null?void 0:d.kind)===30023?"Update":"Publish"]})]})})})]}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx(t,{}),s.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-200px)]",children:s.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Edit Document"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"You need to connect your Nostr account to edit documents."}),s.jsx(w,{className:"max-w-60 mx-auto mb-4"}),s.jsx(c,{variant:"outline",onClick:()=>e("/"),children:"Browse Documents Instead"})]})})]})}export{$ as default};
